CREATE TABLE COMBUSTIVEL (
    CODIGO     INTEGER GENERATED BY DEFAULT AS IDENTITY,
    DESCRICAO  VARCHAR(50) NOT NULL,
    VALOR      NUMERIC(15,3) DEFAULT 0 NOT NULL,
    IMPOSTO    NUMERIC(15,2) DEFAULT 0 NOT NULL
);


ALTER TABLE COMBUSTIVEL ALTER CODIGO RESTART WITH 0;
ALTER TABLE COMBUSTIVEL ADD CONSTRAINT PK_COMBUSTIVEL PRIMARY KEY (CODIGO);

CREATE TABLE TANQUES (
    CODIGO              INTEGER GENERATED BY DEFAULT AS IDENTITY,
    DESCRICAO           VARCHAR(50) NOT NULL,
    CODIGO_COMBUSTIVEL  INTEGER NOT NULL
);

ALTER TABLE TANQUES ALTER CODIGO RESTART WITH 0;
ALTER TABLE TANQUES ADD CONSTRAINT PK_TANQUES PRIMARY KEY (CODIGO, CODIGO_COMBUSTIVEL);
ALTER TABLE TANQUES ADD CONSTRAINT FK_TANQUES_COMBUSTIVEL FOREIGN KEY (CODIGO_COMBUSTIVEL) REFERENCES COMBUSTIVEL (CODIGO);
ALTER TABLE TANQUES ADD QUANTIDADE NUMERIC(15,3) DEFAULT 0 NOT NULL;

CREATE TABLE BOMBAS (
    CODIGO              INTEGER GENERATED BY DEFAULT AS IDENTITY,
    DESCRICAO           VARCHAR(50) NOT NULL,
    CODIGO_TANQUE       INTEGER NOT NULL,
    CODIGO_COMBUSTIVEL  INTEGER NOT NULL
);

ALTER TABLE BOMBAS ALTER CODIGO RESTART WITH 0;
ALTER TABLE BOMBAS ADD CONSTRAINT PK_BOMBAS PRIMARY KEY (CODIGO, CODIGO_TANQUE, CODIGO_COMBUSTIVEL);
ALTER TABLE BOMBAS ADD CONSTRAINT FK_BOMBAS_TANQUE FOREIGN KEY (CODIGO_TANQUE, CODIGO_COMBUSTIVEL) REFERENCES TANQUES (CODIGO, CODIGO_COMBUSTIVEL);

CREATE TABLE ABASTECIMENTO (
    CODIGO               INTEGER GENERATED BY DEFAULT AS IDENTITY,
    DATA                 TIMESTAMP NOT NULL,
    BOMBA                INTEGER NOT NULL,
    LITROS               NUMERIC(15,3) DEFAULT 0 NOT NULL,
    VALOR_ABASTECIMENTO  NUMERIC(15,2) DEFAULT 0 NOT NULL,
    VALOR_IMPOSTO        NUMERIC(15,2) DEFAULT 0 NOT NULL,
    CODIGO_TANQUE        INTEGER NOT NULL,
    CODIGO_COMBUSTIVEL   INTEGER NOT NULL
);

ALTER TABLE ABASTECIMENTO ALTER CODIGO RESTART WITH 0;
ALTER TABLE ABASTECIMENTO ADD CONSTRAINT PK_ABASTECIMENTO PRIMARY KEY (CODIGO, BOMBA, CODIGO_TANQUE, CODIGO_COMBUSTIVEL);
ALTER TABLE ABASTECIMENTO ADD CONSTRAINT FK_ABASTECIMENTO_BOMBAS FOREIGN KEY (BOMBA, CODIGO_TANQUE, CODIGO_COMBUSTIVEL) REFERENCES BOMBAS (CODIGO, CODIGO_TANQUE, CODIGO_COMBUSTIVEL);